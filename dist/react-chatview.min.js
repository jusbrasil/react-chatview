!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","react-dom"],e):"object"==typeof exports?exports.ReactChatView=e(require("react"),require("react-dom")):t.ReactChatView=e(t.React,t.ReactDOM)}(this,function(t,e){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(1),i=r(o),c=n(2),u=r(c),l=n(3),a=r(l),s=n(16),f=r(s),p=i.default.createClass({displayName:"ChatView",propTypes:{domNode:f.default.object,flipped:f.default.bool,scrollLoadThreshold:f.default.number,onInfiniteLoad:f.default.func,loadingSpinnerDelegate:f.default.element,className:f.default.string,enableAutoScroll:f.default.bool},getDefaultProps:function(){return{flipped:!1,scrollLoadThreshold:10,loadingSpinnerDelegate:i.default.createElement("div",null),className:"",enableAutoScroll:!0}},getInitialState:function(){return this.rafRequestId=null,this.scrollTop=0,this.scrollHeight=void 0,{isInfiniteLoading:!1}},componentWillUpdate:function(t,e){},render:function(){var t=(0,a.default)(this.props.children),e=i.default.createElement("div",{ref:"loadingSpinner"},this.state.isInfiniteLoading?this.props.loadingSpinnerDelegate:null);return i.default.createElement("div",{className:this.props.className,ref:"scrollable"},i.default.createElement("div",{ref:"smoothScrollingWrapper"},this.props.flipped?e:null,t,this.props.flipped?null:e))},pollScroll:function(){var t=this,e=this.props.domNode||u.default.findDOMNode(this);if(e.scrollTop!==this.scrollTop){if(this.shouldTriggerLoad(e)&&this.props.onInfiniteLoad){this.setState({isInfiniteLoading:!0});var n=this.props.onInfiniteLoad();n.then(function(){return t.setState({isInfiniteLoading:!1})})}this.updateScrollTop(e.scrollHeight!==this.scrollHeight)}else e.scrollHeight!==this.scrollHeight&&this.updateScrollTop();this.rafRequestId=window.requestAnimationFrame(this.pollScroll)},isPassedThreshold:function(t,e,n,r,o){return t?n<=e:n>=r-o-e},shouldTriggerLoad:function(t){var e=this.isPassedThreshold(this.props.flipped,this.props.scrollLoadThreshold,t.scrollTop,t.scrollHeight,t.clientHeight);return e&&!this.state.isInfiniteLoading},componentDidMount:function(){if(this.props.enableAutoScroll){var t=this.props.domNode||u.default.findDOMNode(this),e=this.props.flipped?t.scrollHeight-t.clientHeight:0;t.scrollTop=e,this.scrollTop=e}this.rafRequestId=window.requestAnimationFrame(this.pollScroll)},componentWillUnmount:function(){window.cancelAnimationFrame(this.rafRequestId)},componentDidUpdate:function(t,e){this.updateScrollTop()},updateScrollTop:function(){if(this.props.enableAutoScroll){var t=this.props.domNode||u.default.findDOMNode(this),e=t.scrollTop+(this.props.flipped?t.scrollHeight-(this.scrollHeight||0):0);e!==t.scrollTop&&(t.scrollTop=e),this.scrollTop=t.scrollTop,this.scrollHeight=t.scrollHeight}}});t.exports=p},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){function r(t,e,n,r){return e&&"boolean"!=typeof e&&c(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?o(t,e,i(n,r,3)):o(t,e)}var o=n(4),i=n(14),c=n(15);t.exports=r},function(t,e,n){(function(e){function r(t,e,n,i,d,y,v){var g;if(n&&(g=d?n(t,i,d):n(t)),void 0!==g)return g;if(!a(t))return t;var j=h(t);if(j){if(g=c(t),!e)return s(t,g)}else{var m=W.call(t),T=m==x;if(m!=S&&m!=b&&(!T||d))return C[m]?l(t,m,e):d?t:{};if(g=u(T?{}:t),!e)return p(g,t)}y||(y=[]),v||(v=[]);for(var O=y.length;O--;)if(y[O]==t)return v[O];return y.push(t),v.push(g),(j?f:o)(t,function(o,i){g[i]=r(o,e,n,i,t,y,v)}),g}function o(t,e){return d(t,e,y)}function i(t){var e=new B(t.byteLength),n=new V(e);return n.set(new V(t)),e}function c(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&k.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function u(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Object),new e}function l(t,e,n){var r=t.constructor;switch(e){case P:return i(t);case g:case j:return new r(+t);case R:case E:case H:case N:case D:case F:case $:case q:case _:var o=t.buffer;return new r(n?i(o):o,t.byteOffset,t.length);case O:case I:return new r(t);case w:var c=new r(t.source,U.exec(t));c.lastIndex=t.lastIndex}return c}function a(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var s=n(5),f=n(6),p=n(7),d=n(13),h=n(12),y=n(9),b="[object Arguments]",v="[object Array]",g="[object Boolean]",j="[object Date]",m="[object Error]",x="[object Function]",T="[object Map]",O="[object Number]",S="[object Object]",w="[object RegExp]",A="[object Set]",I="[object String]",L="[object WeakMap]",P="[object ArrayBuffer]",R="[object Float32Array]",E="[object Float64Array]",H="[object Int8Array]",N="[object Int16Array]",D="[object Int32Array]",F="[object Uint8Array]",$="[object Uint8ClampedArray]",q="[object Uint16Array]",_="[object Uint32Array]",U=/\w*$/,C={};C[b]=C[v]=C[P]=C[g]=C[j]=C[R]=C[E]=C[H]=C[N]=C[D]=C[O]=C[S]=C[w]=C[I]=C[F]=C[$]=C[q]=C[_]=!0,C[m]=C[x]=C[T]=C[A]=C[L]=!1;var M=Object.prototype,k=M.hasOwnProperty,W=M.toString,B=e.ArrayBuffer,V=e.Uint8Array;t.exports=r}).call(e,function(){return this}())},function(t,e){function n(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}t.exports=n},function(t,e,n){function r(t,e){return null==e?t:o(e,i(e),t)}var o=n(8),i=n(9);t.exports=r},function(t,e){function n(t,e,n){n||(n={});for(var r=-1,o=e.length;++r<o;){var i=e[r];n[i]=t[i]}return n}t.exports=n},function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}function o(t){return null!=t&&c(g(t))}function i(t,e){return t="number"==typeof t||d.test(t)?+t:-1,e=null==e?v:e,t>-1&&t%1==0&&t<e}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function u(t){for(var e=a(t),n=e.length,r=n&&t.length,o=!!r&&c(r)&&(p(t)||f(t)),u=-1,l=[];++u<n;){var s=e[u];(o&&i(s,r)||y.call(t,s))&&l.push(s)}return l}function l(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function a(t){if(null==t)return[];l(t)||(t=Object(t));var e=t.length;e=e&&c(e)&&(p(t)||f(t))&&e||0;for(var n=t.constructor,r=-1,o="function"==typeof n&&n.prototype===t,u=Array(e),a=e>0;++r<e;)u[r]=r+"";for(var s in t)a&&i(s,e)||"constructor"==s&&(o||!y.call(t,s))||u.push(s);return u}var s=n(10),f=n(11),p=n(12),d=/^\d+$/,h=Object.prototype,y=h.hasOwnProperty,b=s(Object,"keys"),v=9007199254740991,g=r("length"),j=b?function(t){var e=null==t?void 0:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&o(t)?u(t):l(t)?b(t):[]}:u;t.exports=j},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return c(n)?n:void 0}function o(t){return i(t)&&p.call(t)==u}function i(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function c(t){return null!=t&&(o(t)?d.test(s.call(t)):n(t)&&l.test(t))}var u="[object Function]",l=/^\[object .+?Constructor\]$/,a=Object.prototype,s=Function.prototype.toString,f=a.hasOwnProperty,p=a.toString,d=RegExp("^"+s.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e){function n(t){return o(t)&&h.call(t,"callee")&&(!b.call(t,"callee")||y.call(t)==s)}function r(t){return null!=t&&c(t.length)&&!i(t)}function o(t){return l(t)&&r(t)}function i(t){var e=u(t)?y.call(t):"";return e==f||e==p}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function l(t){return!!t&&"object"==typeof t}var a=9007199254740991,s="[object Arguments]",f="[object Function]",p="[object GeneratorFunction]",d=Object.prototype,h=d.hasOwnProperty,y=d.toString,b=d.propertyIsEnumerable;t.exports=n},function(t,e){function n(t){return!!t&&"object"==typeof t}function r(t,e){var n=null==t?void 0:t[e];return u(n)?n:void 0}function o(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=v}function i(t){return c(t)&&h.call(t)==a}function c(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function u(t){return null!=t&&(i(t)?y.test(p.call(t)):n(t)&&s.test(t))}var l="[object Array]",a="[object Function]",s=/^\[object .+?Constructor\]$/,f=Object.prototype,p=Function.prototype.toString,d=f.hasOwnProperty,h=f.toString,y=RegExp("^"+p.call(d).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=r(Array,"isArray"),v=9007199254740991,g=b||function(t){return n(t)&&o(t.length)&&h.call(t)==l};t.exports=g},function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),c=r(e),u=c.length;u--;){var l=c[t?u:++o];if(n(i[l],l,i)===!1)break}return e}}var r=n();t.exports=r},function(t,e){function n(t,e,n){if("function"!=typeof t)return r;if(void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,o){return t.call(e,n,r,o)};case 4:return function(n,r,o,i){return t.call(e,n,r,o,i)};case 5:return function(n,r,o,i,c){return t.call(e,n,r,o,i,c)}}return function(){return t.apply(e,arguments)}}function r(t){return t}t.exports=n},function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}function r(t){return null!=t&&c(s(t))}function o(t,e){return t="number"==typeof t||l.test(t)?+t:-1,e=null==e?a:e,t>-1&&t%1==0&&t<e}function i(t,e,n){if(!u(n))return!1;var i=typeof e;if("number"==i?r(n)&&o(e,n.length):"string"==i&&e in n){var c=n[e];return t===t?t===c:c!==c}return!1}function c(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}function u(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}var l=/^\d+$/,a=9007199254740991,s=n("length");t.exports=i},function(t,e,n){t.exports=n(17)()},function(t,e,n){"use strict";function r(){}var o=n(18);t.exports=function(){function t(t,e,n,r,i,c){if(c!==o){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return n.checkPropTypes=r,n.PropTypes=n,n}},function(t,e){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=n}])});